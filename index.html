<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Gizli Günlük</title>
<style>
:root{
  --bg:#000;
  --card:rgba(18,18,18,0.96);
  --muted:#bdbdbd;
  --accent:#8b5cf6;
  --danger:#ef4444;
  --text:#ffffff;
}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}
.bg-decor{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  overflow:hidden;
}
.bg-decor img{
  position:absolute;
  opacity:0.08;
  animation: float 8s ease-in-out infinite;
}
.bg-lav{ right:-80px; bottom:-120px; width:540px; transform:rotate(25deg); }
.bg-daisy{ left:-80px; top:-120px; width:440px; transform:rotate(-12deg); animation-duration:9s; }
@keyframes float{
  0%{transform:translateY(0)}
  50%{transform:translateY(-12px)}
  100%{transform:translateY(0)}
}
/* overlay */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.88);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:30;
}
.login{
  background:var(--card);
  padding:18px;
  border-radius:12px;
  max-width:400px;
  width:100%;
  text-align:center;
}
.login input{width:100%; padding:10px; border-radius:6px; border:1px solid rgba(255,255,255,0.1); margin-top:8px; background:transparent; color:var(--text);}
.btn{margin-top:8px; padding:8px 12px; border:none; border-radius:6px; cursor:pointer;}
.btn.primary{background:var(--accent); color:#fff;}
.btn.ghost{background:transparent; border:1px solid rgba(255,255,255,0.1); color:#fff;}
.msg{color:var(--danger); display:none; margin-top:6px;}
.wrap{position:relative; z-index:10; max-width:900px; margin:36px auto; padding:18px;}
.card{background:var(--card); border-radius:12px; padding:16px;}
header{display:flex; justify-content:space-between; align-items:center;}
.notes{margin-top:12px; display:flex; flex-direction:column; gap:12px;}
.note{background:rgba(255,255,255,0.02); padding:12px; border-radius:10px;}
.small{padding:6px 8px; border-radius:6px; border:1px solid rgba(255,255,255,0.1); background:transparent; color:var(--text); cursor:pointer;}
.small.del{color:var(--danger);}
footer{margin-top:12px; color:var(--muted);}
</style>
</head>
<body>

<div class="bg-decor">
  <img src="images/daisy.png" alt="" class="bg-daisy">
  <img src="images/lavender.png" alt="" class="bg-lav">
</div>

<div class="overlay" id="overlay">
  <div class="login">
    <h2>Giriş</h2>
    <input type="password" id="pwd" placeholder="Şifre">
    <div>
      <button class="btn primary" id="pwdBtn">Giriş</button>
      <button class="btn ghost" id="pwdClear">Temizle</button>
    </div>
    <div class="msg" id="pwdMsg">Şifre yanlış.</div>
  </div>
</div>

<div class="wrap">
  <div class="card" id="app">
    <header>
      <div>
        <div class="title">Gizli Günlük</div>
        <div class="subtitle">Siyah tema · papatya &amp; lavanta</div>
      </div>
      <div id="status" style="color:var(--muted)">Giriş yapılmadı</div>
    </header>

    <div id="writeArea" style="display:none">
      <input type="date" id="entryDate">
      <textarea id="entryText" placeholder="Bugün ne oldu?"></textarea>
      <button class="btn primary" id="saveBtn">Kaydet</button>
    </div>

    <div class="notes" id="notesList"></div>

    <footer>Veriler tarayıcıda saklanır.</footer>
  </div>
</div>

<script>
const OWNER_PWD="04.09.2010";
const READER_PWD="01.16.2024";
const STORAGE_KEY="gizli_gunluk_v3";

const overlay=document.getElementById("overlay");
const pwdInput=document.getElementById("pwd");
const pwdBtn=document.getElementById("pwdBtn");
const pwdClear=document.getElementById("pwdClear");
const pwdMsg=document.getElementById("pwdMsg");
const status=document.getElementById("status");

const writeArea=document.getElementById("writeArea");
const entryDate=document.getElementById("entryDate");
const entryText=document.getElementById("entryText");
const saveBtn=document.getElementById("saveBtn");
const notesList=document.getElementById("notesList");

let mode=null;

function loadEntries(){return JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]");}
function saveEntries(arr){localStorage.setItem(STORAGE_KEY,JSON.stringify(arr));}

function render(){
  const all=loadEntries();
  all.sort((a,b)=>new Date(b.addedAt)-new Date(a.addedAt));
  notesList.innerHTML="";
  if(all.length===0){notesList.innerHTML='<div style="color:var(--muted)">Henüz kayıt yok.</div>'}
  else{
    for(const e of all){
      const div=document.createElement("div");
      div.className="note";
      div.innerHTML=`<div>${e.date} ${e.owner?"• sahibin notu":""}</div><div>${e.text}</div>`;
      if(mode==="owner"){
        const del=document.createElement("button");
        del.className="small del";
        del.textContent="Sil";
        del.onclick=()=>{saveEntries(loadEntries().filter(x=>x.addedAt!==e.addedAt)); render();}
        div.appendChild(del);
      }
      notesList.appendChild(div);
    }
  }
}

pwdBtn.onclick=function(){
  const v=pwdInput.value.trim();
  if(v===OWNER_PWD)mode="owner";
  else if(v===READER_PWD)mode="reader";
  else{pwdMsg.style.display="block"; return;}
  pwdMsg.style.display="none";
  overlay.style.display="none";
  status.textContent=mode==="owner"?"Mod: Sahip (yazma)":"Mod: Okuyucu (sadece okuma)";
  writeArea.style.display=mode==="owner"?"block":"none";
  render();
  pwdInput.value="";
}
pwdClear.onclick=()=>{pwdInput.value=""; pwdMsg.style.display="none";}

saveBtn.onclick=function(){
  if(mode!=="owner"){alert("Sahip şifresiyle giriş yapmalısın."); return;}
  const date=entryDate.value; const text=entryText.value.trim();
  if(!date||!text){alert("Lütfen tarih ve not gir."); return;}
  const arr=loadEntries();
  arr.push({date,text,addedAt:new Date().toISOString(),owner:true});
  saveEntries(arr);
  entryDate.value=""; entryText.value="";
  render();
}
render();
</script>
</body>
</html>
